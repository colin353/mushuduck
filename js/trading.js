// Generated by CoffeeScript 1.6.2
window.TradingStage = (function() {
  function TradingStage() {
    var me;

    me = this;
    this.products = [];
    $('.tradingstage-interface .box').each(function() {
      var type;

      type = $(this).attr('data-production-type');
      return me.products[type] = new TradingProduct($(this), player.products[type]);
    });
    $('.tradingstage-interface .inventory').sortable({
      helper: function(e, ui) {
        return $("<div class='square'></div>").css('background-color', player.products[ui.attr('data-production-type')].color);
      },
      start: function(e, ui) {
        return ui.item.show();
      },
      change: function() {
        return $(this).sortable("refreshPositions");
      },
      placeholder: 'test',
      stop: function(e, ui) {
        return $(this).sortable('cancel');
      }
    });
  }

  return TradingStage;

})();

window.TradingProduct = (function() {
  function TradingProduct(dom_element, product) {
    this.dom_element = dom_element;
    this.product = product;
    this.product.getPrice();
    this.needsRefresh();
    true;
  }

  TradingProduct.prototype.needsRefresh = function() {
    this.dom_element.children('.amount').html(this.product.amount);
    return this.dom_element.children('.price').html("$" + this.product.price);
  };

  return TradingProduct;

})();
